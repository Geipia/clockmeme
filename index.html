<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Horloge Ultimate</title>

<style>
body{
margin:0;
height:100vh;
display:flex;
justify-content:center;
align-items:center;
flex-direction:column;
background:#050505;
font-family:system-ui;
background-size:cover;
background-position:center;
}

#clock{
font-size:100px;
color:#00ffff;
text-shadow:0 0 25px #00ffff;
}

#toggle{
position:fixed;
bottom:20px;
right:20px;
width:55px;
height:55px;
border-radius:50%;
border:none;
background:#00ffff;
font-size:22px;
cursor:pointer;
box-shadow:0 0 20px #00ffff;
}

#settings{
position:fixed;
bottom:85px;
right:20px;
width:230px;
background:rgba(255,255,255,.12);
backdrop-filter:blur(15px);
padding:15px;
border-radius:15px;
display:none;
color:white;
box-shadow:0 0 25px rgba(0,0,0,.6);
animation:pop .2s;
}

@keyframes pop{
from{transform:scale(.8);opacity:0}
to{transform:scale(1);opacity:1}
}

label{font-size:13px;margin-top:8px;display:block}
input,select{width:100%;margin-top:4px}
</style>
</head>

<body>

<div id="clock">00:00:00</div>

<div id="settings">

<label>Couleur heure</label>
<input type="color" onchange="setColor(this.value)">

<label>Glow</label>
<input type="range" min="0" max="60" value="25" oninput="setGlow(this.value)">

<label>Taille</label>
<input type="range" min="40" max="160" value="100"
oninput="clock.style.fontSize=this.value+'px'">

<label>Police heure</label>
<select onchange="clock.style.fontFamily=this.value">
<option>Arial</option>
<option>Georgia</option>
<option>Verdana</option>
<option>Courier New</option>
<option>Impact</option>
</select>

<label>Fond image</label>
<input type="file" accept="image/*" onchange="bgImage(this)">

<label>Fond couleur</label>
<input type="color" onchange="document.body.style.background=this.value">

<label>Volume</label>
<input type="range" min="0" max="1" step="0.01" value="0.5" oninput="setVolume(this.value)">

<label>Musique MP3</label>
<input type="file" accept="audio/mp3" onchange="playMusic(this)">

</div>

<button id="toggle" onclick="toggle()">⚙️</button>

<audio id="music"></audio>

<script>
const clock=document.getElementById("clock");
const settings=document.getElementById("settings");
const music=document.getElementById("music");

let color="#00ffff";
let volume=0.5;
let fadeTime=2000;

function update(){
clock.innerHTML=new Date().toLocaleTimeString();
}
setInterval(update,1000);update();

function toggle(){
settings.style.display=settings.style.display=="block"?"none":"block";
}

function setColor(c){
color=c;
clock.style.color=c;
clock.style.textShadow="0 0 25px "+c;
}

function setGlow(v){
clock.style.textShadow="0 0 "+v+"px "+color;
}

function bgImage(i){
document.body.style.backgroundImage=
"url("+URL.createObjectURL(i.files[0])+")";
}

function setVolume(v){
volume=v;
music.volume=v;
}

function playMusic(i){
music.src=URL.createObjectURL(i.files[0]);
music.volume=0;
music.play();
fadeIn();
}

music.addEventListener("ended",()=>{
fadeOut(()=>{
music.currentTime=0;
music.play();
fadeIn();
});
});

function fadeIn(){
let v=0;
const t=setInterval(()=>{
v+=0.02;
music.volume=Math.min(v,volume);
if(v>=volume) clearInterval(t);
},50);
}

function fadeOut(cb){
let v=music.volume;
const t=setInterval(()=>{
v-=0.02;
music.volume=Math.max(v,0);
if(v<=0){
clearInterval(t);
cb();
}
},50);
}
</script>

</body>
</html>
